---
title: "moca qr"
bg: pink
color: black
fa-icon: code
---

# General Overview of MoCa-QR

## **Modules**

### I. Setup of the Election
1. **Keys Generation:**
    - *Authority Keys:* for the encryption of the ballots, MoCa-QR uses a Paillier Threshold scheme, in which we have a public key to encrypt all the votes, and the private key is divided among a certain number of 'Authorities'. At the end of the election, just a fraction of those Authorities are necessary to reveal the final result of the election.
    - *Voter Keys:* each voter must sign her encrypted ballot at the time of casting it, so before the day of the election is necessary for the voter to generate a key pair to make this procedure. The public is uploaded to a Bulletin Board and the private is being stored by each voter, in an application on their mobile phones called SignatureApp.
    
### II. Voter Interaction Modules
1. **Ballot Selection:**

    Is this moment when the voter makes her selections on a simple user-friendly hardware (e.g. a tablet). This module interacts with the voter, accepting her selections, encrypting them with the values configured previously (public key of the authority), and then asking to the voter to sign it with SignatureApp (configured previously). After the signature process, the module prints a ballot with three parts: the first one showing the selections made in plain human-readable text, the second showing in a QR code the encryption plus the signature made, and finally showing in a QR code the randomness used to encrypt the selections (this value will be necessary for the cast-as-intended verification).

2. **Ballot Verification.**

    After printing the ballot, the voter can verify the corretness of the encrypted value, i.e. to check if the encryption really encodes the selections that she intended to cast. The voter, in this independent module, has to scan both QR codes (the encryption and the randomness) present on the ballot, and with this the module runs an algorithm to verify the encryption. It shows on screen the candidate that is encrypted. If it is the candidates that the voter intended to cast, the first machine did a good work and produced the correct encryption. If not, is because the first machine wanted to "trick" the voter encrypting other candidates rather than the ones that she intended to cast, so the voter can go back and produce a new ballot. What to do if the problem continues? One of the questions still open in this project.

3. **Ballot Casting.**

    After the verification (if successful) the voter needs to fold her ballot, hiding the first part (candidate in human-readable text), and go to the polling station to cast her vote. The poll worker receive the ballot, detaches the thrid part (randomness) of the ballot and destroys it (if not, the voter could demonstrate how show voted to another person), then scans the encrypted ballot, where the computer verifies the signature made by the voter, if it's correct, the encryption will be uploaded to the bulletin board. Finally the poll worker detaches the encryption from the first part of the ballot, and the voter deposits this first part (human-readable text of the candidate selected) into an urn placed right there in the polling station, and can bring home the encryption with her.
    
### III. Tallying the Election
1. **Ballots Multiplication.**

    MoCa QR uses the homomorphic property of the Paillier encryption scheme. Because of that, at the end of the election, the election administrator has to multiply all the encrypted ballots stored in the bulletin board and write this new resulting value also in the bulletin board for the authorities to decrypt it afterwards.

2. **Generate Partial Decryptions.**

    After the calculation of the multiplication of the ballots, the authorities need to use their share of the private key to generate the partial decryptions of the final result (homomorphic property of the scheme). When just a fraction of the authorities had already uploaded their partial decrpytion, the outcome of the election can be revealed. Each authority produces their partial decryption using AuthorityApp.

3. **Combine Partial Decryptions.**

    Once there are enough partial decryptions, the election administrator, using a dummy share of the private key (this is necessary for how is implmeneted the Paillier library) can combine all the partial decryptions and reveal the final result of the election.


## **Bulletin Board (BB)**

The BB is a server that stores public information regarding the actual election that has been running on. This public information is necessary to be here for transparency of the process, and is more easy for the applications to retrieve them and use it for each of the modules. There are some modules that can not connect to Internet, so some of this public information is delivered to them as a local file in their applications. The values that need to be on the BB are:

- Authority Public Key.
- Voters Public Keys.
- Candidates List.
- Encrypted Ballots.
- Ballots Multiplication.
- Dummy Private Share of the Authorities.
- Partial Decryptions.
    
                    